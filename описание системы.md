# Описание системы управления контрактами Озон

## Что это за система?

Это веб-приложение для управления всеми контрактами с Озоном от момента получения запроса до финальной поставки. Система работает как доска в стиле Trello, где каждый контракт представлен карточкой, которая движется по этапам процесса.

## Как войти в систему?

Вход происходит через Telegram:
1. Вы открываете бота в Telegram
2. Нажимаете кнопку "Открыть приложение"
3. Система автоматически определяет вас и открывает веб-приложение
4. Никаких паролей вводить не нужно - все работает через Telegram

## Основной интерфейс - Доска с контрактами

### Главный экран

Главный экран представляет собой доску с 8 колонками (этапами процесса):

1. **Продукт на этапе идеи** - новые идеи продуктов для предложения Озону
2. **Запрос из Озона** - поступившие запросы от Озона
3. **Поиск производства** - этап поиска и оценки производителей
4. **Подготовка КП** - создание коммерческого предложения
5. **На согласовании у Озон** - ожидание ответа от Озона
6. **В производстве** - контракт в работе у производителя
7. **В поставке** - организация логистики и доставки
8. **Подпись документов** - финальное оформление

### Карточка контракта

Каждая карточка содержит:
- **Название контракта** - краткое описание
- **Описание** - вся информация о контракте (можно использовать форматирование)
- **Ответственный** - кто ведет этот контракт
- **Назначенные** - кто еще работает над контрактом (может быть несколько человек)
- **Следующий шаг** - что нужно сделать дальше (обязательное поле)
- **Срок выполнения** - дедлайн (обязательное поле)
- **Приоритет** - низкий, обычный, высокий, срочный (цветовая индикация)
- **Теги** - категории контракта (СТМ, перепродажа, сезонные и т.д.)
- **Задачи** - список задач текущего этапа с чекбоксами
- **Файлы** - документы, связанные с контрактом

### Работа с карточками

- **Перемещение**: карточки можно перетаскивать между колонками (drag & drop)
- **Открытие**: клик по карточке открывает детальную информацию
- **Создание**: кнопка "Создать контракт" открывает форму
- **Редактирование**: можно изменить любую информацию о контракте
- **Фильтрация**: можно фильтровать по тегам, приоритету, ответственному, этапу

## Роли пользователей

### Полный доступ (full_access)

- Видят **все** контракты в системе
- Могут создавать новые контракты
- Могут редактировать и удалять любые контракты
- Могут назначать ответственных и участников
- Имеют доступ к статистике и аналитике

**Кто это:** руководители, менеджеры, администраторы

### Ограниченный доступ (limited_access)

- Видят **только** контракты, на которые они назначены
- Могут редактировать только назначенные на них контракты
- Могут выполнять задачи и загружать файлы
- **Не могут** создавать новые контракты

**Кто это:** продюсеры, исследователи, исполнители

## Как работает процесс?

### Создание контракта

1. Нажимаете "Создать контракт"
2. Заполняете обязательные поля:
   - Название
   - Описание
   - Ответственный (обязательно)
   - Следующий шаг (обязательно)
   - Срок выполнения (обязательно)
3. Опционально: назначаете дополнительных участников, выбираете приоритет и теги
4. Сохраняете - контракт появляется на доске

### Движение по этапам

1. Контракт создается на нужном этапе (например, "Запрос из Озона")
2. На каждом этапе есть список задач (например, "Получить ТЗ от Озона", "Загрузить документы")
3. Выполняете задачи, отмечая их галочками
4. Когда все **обязательные** задачи выполнены, можно перетащить карточку на следующий этап
5. При переходе на новый этап автоматически создаются задачи для этого этапа
6. Система не даст перейти дальше, пока не выполнены обязательные задачи

### Задачи

- Каждый этап имеет свой набор задач
- Задачи могут быть обязательными (без них нельзя перейти дальше) или опциональными
- При переходе на этап задачи создаются автоматически из шаблона
- Можно добавлять свои задачи вручную
- Выполненные задачи отмечаются галочкой

### Файлы

- К каждому контракту можно прикреплять файлы (документы, фото, КП и т.д.)
- При загрузке файла с тем же именем старая версия сохраняется
- Можно просмотреть историю версий файла
- Все файлы хранятся в системе и доступны для скачивания

## Уведомления и напоминания

### Telegram уведомления

Все важные события приходят в Telegram:

- **Создание контракта** - уведомление назначенным пользователям
- **Изменение этапа** - уведомление всем участникам
- **Новые задачи** - уведомление о появлении задач
- **Завершение задач** - уведомление о прогрессе
- **Просрочка дедлайна** - срочное уведомление с эскалацией

### Напоминания по дедлайнам

Система автоматически напоминает о приближающихся дедлайнах:

- **Личные напоминания** - каждому назначенному пользователю:
  - За 7 дней до дедлайна
  - За 3 дня до дедлайна
  - За 1 день до дедлайна
- **Напоминания в канал** - публичные уведомления в настроенные Telegram каналы
- **При просрочке** - автоматическая эскалация резервному ответственному или руководителю

### Команды Telegram бота

В боте доступны команды для быстрого доступа:

- `/my_contracts` - список моих контрактов
- `/deadlines` - ближайшие дедлайны
- `/overdue` - просроченные контракты
- `/urgent` - срочные контракты

## Дополнительные возможности

### Теги и категории

- Контракты можно помечать тегами (например, "СТМ", "Перепродажа", "Новый год")
- Теги помогают группировать и быстро находить контракты
- Можно фильтровать доску по тегам
- Статистика показывает количество контрактов по каждому тегу

### Приоритеты

- **Низкий** - обычная работа
- **Обычный** - стандартный приоритет
- **Высокий** - требует внимания
- **Срочный** - максимальный приоритет (красная индикация)

Срочные контракты:
- Отображаются первыми в колонках
- Получают более частые уведомления
- При просрочке автоматически получают статус "Срочный"

### Резервный ответственный

- Можно назначить резервного ответственного на случай отсутствия основного
- При просрочке дедлайна автоматически уведомляется резервный
- Если резервного нет, эскалация идет к создателю контракта или администратору

### История изменений

- Система сохраняет полную историю всех изменений
- Можно увидеть, кто и когда изменил контракт
- Отслеживается переход между этапами
- История изменений дедлайнов, ответственных, описания

### Архивирование

- Завершенные контракты можно архивировать
- Архивные контракты не отображаются на основной доске
- Но остаются доступными для просмотра и анализа
- Статистика учитывает архивные контракты

## Дашборд и статистика

### Общая статистика

На отдельной странице доступна аналитика:

- **Количество контрактов по этапам** - сколько контрактов на каждом этапе
- **Просроченные контракты** - список контрактов с просроченными дедлайнами
- **Срочные контракты** - контракты с высоким приоритетом
- **Воронка продаж** - визуализация движения контрактов по этапам
- **Среднее время прохождения этапов** - сколько времени занимает каждый этап
- **Процент успешных контрактов** - сколько контрактов дошли до конца
- **Нагрузка по пользователям** - сколько контрактов у каждого сотрудника

### Фильтры и поиск

- **Поиск** - быстрый поиск контрактов по названию, описанию
- **Фильтры** - по тегам, приоритету, этапу, ответственному, просроченным
- **Сортировка** - по приоритету, дедлайну, дате создания

## Что система делает автоматически?

### Автоматизация процессов

1. **Создание задач** - при переходе на этап автоматически создаются задачи из шаблона
2. **Напоминания** - автоматическое создание напоминаний при установке дедлайна
3. **Эскалация** - автоматическая эскалация при просрочке дедлайна
4. **Повышение приоритета** - просроченные контракты автоматически получают статус "Срочный"
5. **Уведомления** - автоматическая отправка уведомлений при всех важных событиях

### Блокировки и защита

Система не даст:

- Сохранить контракт без ответственного, следующего шага и дедлайна
- Перейти на следующий этап без выполнения обязательных задач
- Удалить активный контракт
- Снять ответственного без назначения нового

Это гарантирует, что ничего не выпадет из процесса и все важные данные будут заполнены.

## Примеры использования

### Пример 1: Новый запрос от Озона

1. Озон присылает запрос на новый продукт
2. Создаете контракт в колонке "Запрос из Озона"
3. Назначаете ответственного менеджера
4. Указываете следующий шаг: "Получить ТЗ от Озона"
5. Устанавливаете дедлайн
6. Система автоматически создает задачи этапа
7. Выполняете задачи, отмечая их
8. Перетаскиваете карточку на следующий этап "Поиск производства"
9. Система создает задачи для нового этапа
10. И так далее до финальной поставки

### Пример 2: Работа продюсера

1. Продюсер видит только контракты, на которые он назначен
2. Открывает контракт в этапе "Поиск производства"
3. Видит задачи: "Найти производителей", "Связаться с производителями"
4. Выполняет задачи, загружает полученные документы
5. Отмечает выполненные задачи
6. Когда все обязательные задачи выполнены, карточка готова к переходу
7. Менеджер перетаскивает карточку на следующий этап

### Пример 3: Контроль дедлайнов

1. Устанавливаете дедлайн на контракт
2. Система автоматически создает напоминания:
   - За 7 дней - личное уведомление в Telegram
   - За 3 дня - личное уведомление + уведомление в канал
   - За 1 день - срочное уведомление
3. Если дедлайн просрочен:
   - Контракт автоматически получает статус "Срочный"
   - Уведомление резервному ответственному
   - Уведомление в канал
   - Эскалация руководителю

## Преимущества системы

### Для команды

- **Прозрачность** - все видят, на каком этапе каждый контракт
- **Контроль** - невозможно пропустить важные шаги
- **Организация** - все документы и информация в одном месте
- **Автоматизация** - система сама напоминает о дедлайнах

### Для руководителей

- **Обзор** - видна вся картина по всем контрактам
- **Статистика** - понимание эффективности процессов
- **Контроль** - выявление узких мест и проблемных контрактов
- **Эскалация** - автоматическое привлечение внимания к проблемам

### Для исполнителей

- **Фокус** - видят только свои контракты
- **Четкость** - понятно, что нужно делать
- **Уведомления** - не нужно постоянно проверять систему
- **История** - все изменения сохраняются

## Безопасность и доступ

- Вход только через Telegram (безопасная авторизация)
- Каждый пользователь видит только то, что ему нужно
- Все действия логируются
- Файлы хранятся безопасно с версионированием
- История изменений для аудита

## Итог

Система превращает хаотичный процесс работы с контрактами Озон в структурированный, контролируемый и автоматизированный процесс. Ничего не теряется, все дедлайны под контролем, каждый знает свои задачи, а руководители видят полную картину.

